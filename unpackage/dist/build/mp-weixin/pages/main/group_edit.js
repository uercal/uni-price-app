(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/main/group_edit"],{"0e0f":function(t,e,i){"use strict";i("463c");var a=r(i("b0ce")),n=r(i("b55e"));function r(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(n.default))},3042:function(t,e,i){},4622:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(i("376b")),n=i("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},a=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),a.forEach(function(e){s(t,e,i[e])})}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c={data:function(){return{group_id:0,group_data:[],group_name:"",goods_price:[],newPrice:[]}},computed:o({},(0,n.mapState)(["goods"])),methods:{fixed:function(t){var e=t.toFixed(2);return"00"==e.split(".")[1]?e.split(".")[0]:e},submit:function(){var e={},i=this.newPrice,n=i.some(function(t){return!t.rate||""==t.rate});if(""==this.group_name)return a.default.showError("分组名称不能为空"),!1;n?a.default.showError("比例不能为空"):(i.map(function(t){e["goods_id["+t.goods_id+"]"]=[t.rate*t.price/100,t.rate]}),e["group_id"]=this.group_id,e["group_name"]=this.group_name,a.default._post("Member/saveGroup",e,function(e){a.default.showSuccess("成功",function(){t.navigateBack()})}))},clearNoNum:function(t,e){t.value=t.value.replace(/[^\d.]/g,""),t.value=t.value.replace(/\.{2,}/g,"."),t.value=t.value.replace(/^\./g,""),t.value=t.value.replace(".","$#$").replace(/\./g,"").replace("$#$","."),t.value=t.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3");var i=this;setTimeout(function(){i.newPrice[e].rate=t.value},1)},getInfo:function(){var t=this,e=this.group_id,i=this.newPrice;this.goods_price=this.goods,a.default._post("Member/getGroupInfo",{group_id:e},function(e){t.group_name=e.data.group_name;var a=e.data.data;a.map(function(t){i.map(function(e){e.goods_id==t.goods_id&&(e.price=t.price,e.rate=t.rate)})})})}},onLoad:function(t){var e=this;this.goods_price=this.goods,this.goods_price.map(function(t){e.newPrice.push({goods_id:t.goods_id,price:t.price,rate:100})}),console.log(t.group_id),this.group_id=t.group_id,this.getInfo()}};e.default=c}).call(this,i("543d")["default"])},"4c28":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("form",[i("view",{staticClass:"cu-bar bg-white solid-bottom"},[i("view",{staticClass:"action text-title text-bold"},[i("text",{staticClass:"cuIcon-title text-orange"}),t._v("分组信息")])]),i("view",{staticClass:"cu-form-group"},[i("view",{staticClass:"title"},[t._v("分组名称")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.group_name,expression:"group_name"}],attrs:{placeholder:"请填写分组名称",name:"input",eventid:"011de4b9-0"},domProps:{value:t.group_name},on:{input:function(e){e.target.composing||(t.group_name=e.target.value)}}})]),i("view",{staticClass:"cu-bar bg-white solid-bottom margin-top"},[i("view",{staticClass:"action text-bold"},[i("text",{staticClass:"cuIcon-title text-orange"}),t._v("价格比例")])]),i("view",{staticClass:"cu-list menu sm-border card-menu margin-top'"},[i("view",{staticClass:"cu-item"},[i("view",{staticClass:"content"},[i("text",{staticClass:"text-black",staticStyle:{width:"30%"}},[t._v("商品名称")]),i("text",{staticClass:"text-black",staticStyle:{width:"25%"}},[t._v("原价")]),i("text",{staticClass:"text-black",staticStyle:{width:"25%"}},[t._v("现价")]),i("view",{staticStyle:{width:"20%",display:"flex","align-items":"center"}},[i("text",{staticClass:"text-black"},[t._v("比例")])])])]),t._l(t.goods_price,function(e,a){return i("view",{key:e.goods_id,staticClass:"cu-item"},[i("view",{staticClass:"content"},[i("text",{staticClass:"text-grey",staticStyle:{width:"30%"}},[t._v(t._s(e.goods_name))]),i("text",{staticClass:"text-grey",staticStyle:{width:"25%"}},[t._v(t._s(e.price)+"元")]),i("text",{staticClass:"text-grey",staticStyle:{width:"25%"}},[t._v(t._s(t.fixed(t.newPrice[a].rate*e.price/100))+"元")]),i("view",{staticStyle:{width:"20%",display:"flex","align-items":"center"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newPrice[a].rate,expression:"newPrice[index].rate"}],attrs:{placeholder:"比例",name:"input",type:"digit",eventid:"011de4b9-1-"+a},domProps:{value:t.newPrice[a].rate},on:{input:[function(e){e.target.composing||(t.newPrice[a].rate=e.target.value)},function(e){t.clearNoNum(e.target,a)}]}}),i("view",{staticClass:"cu-capsule radius"},[i("label",{staticClass:"cu-tag"},[t._v("%")])],1)])])])})],2),i("view",{staticClass:"padding flex flex-direction"},[i("button",{staticClass:"cu-btn bg-blue margin-tb-sm lg",attrs:{eventid:"011de4b9-2"},on:{click:t.submit}},[t._v("保存")])],1)])],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},b55e:function(t,e,i){"use strict";i.r(e);var a=i("4c28"),n=i("e9b6");for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i("bf4d");var o=i("2877"),s=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,null,null);e["default"]=s.exports},bf4d:function(t,e,i){"use strict";var a=i("3042"),n=i.n(a);n.a},e9b6:function(t,e,i){"use strict";i.r(e);var a=i("4622"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e["default"]=n.a}},[["0e0f","common/runtime","common/vendor"]]]);