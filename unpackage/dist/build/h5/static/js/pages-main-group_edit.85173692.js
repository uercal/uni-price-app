(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-main-group_edit"],{"095c":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-form",[i("v-uni-view",{staticClass:"cu-bar bg-white solid-bottom"},[i("v-uni-view",{staticClass:"action text-title text-bold"},[i("v-uni-text",{staticClass:"cuIcon-title text-orange"}),t._v("分组信息")],1)],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("分组名称")]),i("v-uni-input",{attrs:{placeholder:"请填写分组名称",name:"input"},model:{value:t.group_name,callback:function(e){t.group_name=e},expression:"group_name"}})],1),i("v-uni-view",{staticClass:"cu-bar bg-white solid-bottom margin-top"},[i("v-uni-view",{staticClass:"action text-bold"},[i("v-uni-text",{staticClass:"cuIcon-title text-orange"}),t._v("价格比例")],1)],1),i("v-uni-view",{staticClass:"cu-list menu sm-border card-menu margin-top'"},[i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"text-black",staticStyle:{width:"30%"}},[t._v("商品名称")]),i("v-uni-text",{staticClass:"text-black",staticStyle:{width:"25%"}},[t._v("原价")]),i("v-uni-text",{staticClass:"text-black",staticStyle:{width:"25%"}},[t._v("现价")]),i("v-uni-view",{staticStyle:{width:"20%",display:"flex","align-items":"center"}},[i("v-uni-text",{staticClass:"text-black"},[t._v("比例")])],1)],1)],1),t._l(t.goods_price,function(e,a){return i("v-uni-view",{key:e.goods_id,staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"text-grey",staticStyle:{width:"30%"}},[t._v(t._s(e.goods_name))]),i("v-uni-text",{staticClass:"text-grey",staticStyle:{width:"25%"}},[t._v(t._s(e.price)+"元")]),i("v-uni-text",{staticClass:"text-grey",staticStyle:{width:"25%"},domProps:{innerHTML:t._s(t.newPrice[a].price+"元")}}),i("v-uni-view",{staticStyle:{width:"20%",display:"flex","align-items":"center"}},[i("v-uni-input",{attrs:{placeholder:"比例",name:"input",type:"digit"},on:{input:function(e){e=t.$handleEvent(e),t.clearNoNum(e.target,a)}},model:{value:t.newPrice[a].rate,callback:function(e){t.$set(t.newPrice[a],"rate",e)},expression:"newPrice[index].rate"}}),i("v-uni-view",{staticClass:"cu-capsule radius"},[i("v-uni-label",{staticClass:"cu-tag"},[t._v("%")])],1)],1)],1)],1)})],2),i("v-uni-view",{staticClass:"padding flex flex-direction"},[i("v-uni-button",{staticClass:"cu-btn bg-blue margin-tb-sm lg",on:{click:function(e){e=t.$handleEvent(e),t.submit(e)}}},[t._v("保存")])],1)],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},2448:function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a481"),i("28a5");var n=a(i("cebc")),s=a(i("376b")),o=i("2f62"),c={data:function(){return{group_id:0,group_data:[],group_name:"",goods_price:[],newPrice:[]}},computed:(0,n.default)({},(0,o.mapState)(["goods"])),methods:{submit:function(){var t={},e=this.newPrice,i=e.some(function(t){return!t.rate||""==t.rate});if(""==this.group_name)return s.default.showError("分组名称不能为空"),!1;i?s.default.showError("比例不能为空"):(e.map(function(e){t["goods_id["+e.goods_id+"]"]=[e.rate*e.price/100,e.rate]}),t["group_id"]=this.group_id,t["group_name"]=this.group_name,s.default._post("Member/saveGroup",t,function(t){s.default.showSuccess("成功",function(){uni.navigateBack()})}))},tofixNumber:function(t){t=t.toFixed(2);var e=t.split(".");return"00"==e[1]&&(t=e[0]),t},clearNoNum:function(t,e){t.value=t.value.replace(/[^\d.]/g,""),t.value=t.value.replace(/\.{2,}/g,"."),t.value=t.value.replace(/^\./g,""),t.value=t.value.replace(".","$#$").replace(/\./g,"").replace("$#$","."),t.value=t.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3");var i=this;setTimeout(function(){i.newPrice[e].rate=t.value;var a=i.goods_price[e].price*t.value/100;a=i.tofixNumber(a),i.newPrice[e].price=a},1)},getInfo:function(){var t=this,e=this.group_id,i=this.newPrice;this.goods_price=this.goods,s.default._post("Member/getGroupInfo",{group_id:e},function(e){t.group_name=e.data.group_name;var a=e.data.data;a.map(function(e){i.map(function(i){if(i.goods_id==e.goods_id){i.rate=e.rate;var a=e.rate*i.price/100;i.price=t.tofixNumber(a)}})})})}},onLoad:function(t){var e=this;this.goods_price=this.goods,this.goods_price.map(function(t){e.newPrice.push({goods_id:t.goods_id,price:t.price,rate:100})}),console.log(t.group_id),this.group_id=t.group_id,this.getInfo()}};e.default=c},"75b5":function(t,e,i){"use strict";var a=i("c0fa"),n=i.n(a);n.a},b55e:function(t,e,i){"use strict";i.r(e);var a=i("095c"),n=i("e9b6");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("75b5");var o=i("2877"),c=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"c6835a2e",null);e["default"]=c.exports},c0fa:function(t,e,i){var a=i("d4f4");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("bd814ef0",a,!0,{sourceMap:!1,shadowMode:!1})},d4f4:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".cu-form-group .title[data-v-c6835a2e]{min-width:calc(4em + 15px)}.content[data-v-c6835a2e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around}.content[data-v-c6835a2e]{font-size:14px}.text-grey[data-v-c6835a2e]{word-break:break-all}",""])},e9b6:function(t,e,i){"use strict";i.r(e);var a=i("2448"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a}}]);